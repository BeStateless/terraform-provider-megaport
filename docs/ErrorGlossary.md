This Error Glossary contains a list of known errors generated by the Terraform Provider with potential solutions.

This list is *not* exhaustive and only includes errors within generated by the Terraform module itself.

Each error contains the exact text of the error, the cause, and a potential solution. If the solution given does not work, you can file an issue on GitHub for assistance.

## Table of Contents
1. [CannotSetVIFError](#CannotSetVIFError)
1. [CannotChangeHostedConnectionRateError](#CannotChangeHostedConnectionRateError)
1. [PortNotLockedError](#PortNotLockedError)
1. [PortNotUnlockedError](#PortNotUnlockedError)
1. [ProductNameFilterTooStrictError](#ProductNameFilterTooStrictError)
1. [ConnectTypeFilterTooStrictError](#ConnectTypeFilterTooStrictError)
1. [NoMatchingPartnerPortsAtLocationError](#NoMatchingPartnerPortsAtLocationError)
1. [CompanyNameFilterTooStrictError](#CompanyNameFilterTooStrictError)
1. [TooManyPartnerPortsError](#TooManyPartnerPortsError)
1. [NoLocationsFoundError](#NoLocationsFoundError)
1. [TooManyLocationsError](#TooManyLocationsError)
1. [Error provisioning VXC service, VLAN XXX not available on service XXX](#Error provisioning VXC service, VLAN XXX not available on service XXX)

## CannotSetVIFError

### Error
```
"unable to set the VIF id correctly"
```

### Cause

When you create an AWS Hosted VIF Partner Port, a Hosted VIFs ID is allocated to a Megaport VXC. During creation, the VXC is allocated the VIF ID that has been shared (and is available) within your AWS account. This error is generally returned when Terraform is unable to determine the VIF ID from the Hosted VIF; *it **does not** mean there have been any issues with the creation of your VXC*. This is a transient issue and solely related to Terraform's ability to extrapolate the VIF ID.

### Solution

1. In the [Megaport Portal](https://portal.megaport.com), go to the Services page.
2. Click the gear icon on the relevant VXC to view its connection details.
3. Click the **Details** icon.

If there is a value under **VIF ID**, try running your script again in five minutes. If the error persists or there is no VIF ID, contact Megaport Support.

## CannotChangeHostedConnectionRateError

### Error
```
"you cannot update the rate limit on an AWSHC, create a new resource. If you create a new resource, it will need a new vLAN"
```

### Cause

AWS Hosted Connections provide an entire, physical Direct Connect available for your dedicated use through the AWS Direct Connect Partner Program. As an AWS Direct Connect Partner, Megaport provides you with access to AWS Direct Connect Hosted Connections. Unfortunately, due to service limitations of the 
[AWS Hosted Connection product](https://docs.aws.amazon.com/directconnect/latest/UserGuide/WorkingWithConnections.html), you cannot change the port speed of a provisioned connection.

### Solution

To increase the bandwidth available through a Hosted Connection, create a new Hosted Connection with the required port speed and duplicate settings: 
 
1. Create a new Hosted Connection via Terraform.
1. Point all of your existing infrastructure in Terraform to the new Hosted Connection.
1. Remove the original Hosted Connection.

**Important**: You cannot use the same VLAN for the new Hosted Connection. You will need to choose a new VLAN on your existing Port or MCR.

## PortNotLockedError

### Error
```
"the port has not been locked, modification failed"
```

### Cause

The lock process failed to lock your resource.

### Solution

Try running the script again. If it continues to fail, try locking the Port on the Megaport Portal. If this also fails, contact Megaport Support.

## PortNotUnlockedError

### Error
`"the port was not able to be unlocked, modification failed"`

### Cause

The unlock process failed to unlock your resource.

### Solution

Try running the script again. If it continues to fail, try unlocking the Port via the Megaport Portal. If this also fails, contact Megaport Support.

## ProductNameFilterTooStrictError

### Error
```
"no results have been returned as the product_name filter is too strict"
```

### Cause

Each data lookup within the Megaport Terraform Provider has multiple filters that you can use to look up existing data. Each additional filter may subsequently reduce the number of results that are returned by the Megaport API, but if you have selected filters that contain incorrect information or mistakes, no results will be returned. If this occurs, an error will appear and execution will stop.

A Partner Lookup can also fail if a Product with the given configuration is not available. In the case of this error, a Partner Port with the given name does not exist in combination with your other filters. For example, this error can occur if you attempt to create a VXC for a cloud provider region that is not available at your data center location.

### Solution

In the [Megaport Marketplace](https://portal.megaport.com/marketplace/), verify whether the Partner Port you want actually exists. If it does, check your filter details for accuracy. For assistance in finding a suitable VXC or Port solution, contact the [Megaport Sales Team](https://www.megaport.com/contact/sales/).

## ConnectTypeFilterTooStrictError

### Error
`"no results have been returned as the connect_type filter is too strict"`

### Cause

Each data lookup within the Megaport Terraform Provider has multiple filters that can be used to look up existing data. Each additional filter may subsequently reduce the number of results that are returned by the Megaport API, but if you have selected filters that contain incorrect information or mistakes, no results will be returned. If this occurs, an error will appear and execution will stop.

A Partner Lookup can also fail if a Product with the given configuration is not available. In the case of this error, the Connection Type you are searching for does not exist in combination with your other filters. For example, this error can occur if your specific connection type is not available at your data center location (even if there are Ports from that company available at that location).

### Solution

In the [Megaport Marketplace](https://portal.megaport.com/marketplace/), verify whether the Partner Port you want actually exists. If it does, check your filter details for accuracy. For assistance in finding a suitable VXC or Port solution, contact the [Megaport Sales Team](https://www.megaport.com/contact/sales/).

## NoMatchingPartnerPortsAtLocationError

### Error
```
"no matching partner ports at that location"
```

### Cause

Each data lookup within the Megaport Terraform Provider has multiple filters that can be used to look up existing data. Each additional filter may subsequently reduce the number of results that are returned by the Megaport API, but if you have selected filters that contain incorrect information or mistakes, no results will be returned. If this occurs, an error will appear and execution will stop.

A Partner Lookup can also fail if a Product with the given configuration is not available. In the case of this error, the Connection Type you are searching for does not exist in combination with your other filters. For example, this error can occur if the product is not available at your data center location.

### Solution

In the [Megaport Marketplace](https://portal.megaport.com/marketplace/), verify whether the Partner Port you want actually exists. If it does, check your filter details for accuracy. Your Partner Connections do not need to be co-located with your Megaport Ports. VXCs can connect between data center locations using Megaport's Transit Network. You can also consider a Partner Port in an alternate location.

For assistance in finding a suitable VXC or Port solution, contact the 
[Megaport Sales Team](https://www.megaport.com/contact/sales/).

## CompanyNameFilterTooStrictError

### Error
`"no results have been returned as the company_name filter is too strict"`

### Cause

Each data lookup within the Megaport Terraform Provider has multiple filters that can be used to look up existing data. Each additional filter may subsequently reduce the number of results that are returned by the Megaport API, but if you have selected filters that contain incorrect information or mistakes, no results will be returned. If this occurs, an error will appear and execution will stop.

A Partner Lookup can also fail if a Product with the given configuration is not available. In the case of this error, the Partner Port you are searching for does not exist in combination with your other filters. For example, this error can occur if the provider's products are not offered at that particular data center location.

### Solution

In the [Megaport Marketplace](https://portal.megaport.com/marketplace/), verify whether the Partner Port you want actually exists. If it does, check your filter details for accuracy. Your Partner Connections do not need to be co-located with your Megaport Ports. VXCs can connect between data centre locations using Megaport's Transit Network. You can also consider a Partner Port at an alternate location.

For assistance in finding a suitable VXC or Port solution, contact the 
[Megaport Sales Team](https://www.megaport.com/contact/sales/).

## TooManyPartnerPortsError

### Error
```
"too many results returned, please add more filter properties"
```

### Cause

Each data lookup within the Megaport Terraform Provider has multiple filters that can be used to look up existing data. Each additional filter may subsequently reduce the number of results that are returned by the Megaport API, but if you have selected filters that are strict enough, multiples will be returned. To ensure that the resources you choose are not accidentally destroyed or modified by changing data lookups, you need to add filters until only a single result is returned. If you do not add enough filters to your Partner Port data lookups, an error will appear and execution will stop to ensure that abnormal results or actions do not occur.

### Solution

Add more filters to your Partner Port lookup. Before using this lookup, ensure that you have selected a specific product type and location.

Consider the following two examples for an AWS Hosted VIF Connection in Sydney:

#### Proper Usage

```
data "megaport_partner_port" "aws_test_sydney_1" {
  connect_type = "AWS"
  product_name = "Asia Pacific (Sydney) (ap-southeast-2)"
  location_id = data.megaport_location.glb_switch_sydney.id
}
```

This example specifies a `location_id`, a `connect_type`, and a `product_name`. This will return an
AWS Hosted VIF Partner Port located in Global Switch Sydney West.

#### Incorrect Usage

```
data "megaport_partner_port" "aws_test_sydney_2" {
  company_name = "AWS"
  product_name = "Asia Pacific (Sydney) (ap-southeast-2)"
}
```

This example only specifies a `company_name` and a `product_name`. There are over 25 products available that are hosted on AWS in `ap-southeast-2`. These filter options are **not specific** enough and this call will fail.

### NoLocationsFoundError

#### Error
```
"your location filters are too strict or a location doesn't exist that match your filters"
```

### Cause

Each data lookup within the Megaport Terraform Provider has multiple filters that can be used to look up existing data. Each additional filter may subsequently reduce the number of results that are returned by the Megaport API, but if you have selected filters that contain incorrect information or mistakes, no results will be returned. If this occurs, an error will appear and execution will stop.

#### Solution

Verify whether a location exists with the filters you have provided. This can be done using 
[Megaport Enabled Locations](https://www.megaport.com/megaport-enabled-locations/).

For example, if you want to use MCR in an Equinix data center in Sydney, you could not specify "Equinix SY2" with `mcr_enabled` as **true** because "Equinix SY1" is the only MCR-enabled Sydney location. Instead, you would have to specify "Equinix SY1".

## TooManyLocationsError

### Error
```
"more than result has been returned, add additional filters until 1 result is returned"
```

### Cause

Each data lookup within the Megaport Terraform Provider has multiple filters that can be used to look up existing data. Each additional filter may subsequently reduce the number of results that are returned by the Megaport API, but if you have not selected filters that are strict enough, multiples will be returned. To ensure that the resources you choose are not accidentally destroyed or modified by changing data lookups, you need to add filters until only a single result is returned.

If you do not add enough filters to your Location data lookups, an error will appear and execution will stop to ensure that abnormal results or actions do not occur. Many data center providers have multiple physical locations in each city for redundancy. It is not enough to specify your data center provider or a partial name of the location.

### Solution

Ensure that you use the full name of the data center location you are trying to lookup. To find the full data center name, see the [Megaport Enabled Locations](https://www.megaport.com/megaport-enabled-locations/) page.

#### Proper Usage

```
data megaport_location my_loc {
    name        = "NextDC B1"
    market_code = "AU"
    has_mcr     = true
}
```

```
data megaport_location my_loc {
    name        = "Equinix SY3"
    market_code = "AU"
}
```

#### Incorrect Usage

```
data megaport_location my_loc {
    name        = "NextDC B"
    market_code = "AU"
}
```

```
data megaport_location my_loc {
    name        = "Equinix SY"
    market_code = "AU"
}
```

```
data megaport_location my_loc {
    name        = "Equinix"
    market_code = "AU"
}
```

## Error provisioning VXC service, VLAN xxx not available on service xxxxx

### Error
```
"Error provisioning VXC service, VLAN xxx not available on service xxxxx"
```

### Cause

When a service has been replaced, the existing vLAN will be consumed until released by the device it is attached to
(either MCR or VXC). This process takes between 1 and 5 minutes.

### Solution

Wait five minutes and re-run the script, the vLAN should then be available. If the error persists, please choose
another vLAN.
